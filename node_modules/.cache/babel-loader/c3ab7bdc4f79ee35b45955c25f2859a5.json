{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport axios from 'axios';\nimport { serializeUser } from '../../functions/serializers';\nvar apiUrl = 'https://localhost:9292/';\nvar state = {\n  users: []\n};\nvar getters = {\n  users: function users(state) {\n    return state.users.map(function (user) {\n      return serializeUser(user);\n    });\n  },\n  user: function user(state) {\n    return serializeUser(state.user);\n  }\n};\nvar mutations = {\n  setUsers: function setUsers(state, users) {\n    return state.users = users;\n  },\n  appendUser: function appendUser(state, user) {\n    return state.users = [].concat(_toConsumableArray(state.users), [user]);\n  },\n  updateUser: function updateUser(state, user) {\n    return state.users = state.users.map(function (c) {\n      return c.id === user.id ? user : c;\n    });\n  },\n  removeUser: function removeUser(state, user) {\n    return state.users = state.users.filter(function (c) {\n      return c.id !== user.id;\n    });\n  },\n  setUser: function setUser(state, user) {\n    return state.user = user;\n  }\n};\nvar actions = {\n  fetchUsers: function fetchUsers(_ref, _ref2) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var commit, isCurrentUser, url, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              commit = _ref.commit;\n              isCurrentUser = _ref2.isCurrentUser;\n              url = isCurrentUser ? \"\".concat(apiUrl, \"/users\") : \"\".concat(apiUrl, \"/users/excerpt\");\n              _context.next = 5;\n              return axios.get(url);\n\n            case 5:\n              response = _context.sent;\n              commit('setUsers', response.data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }))();\n  },\n  addUser: function addUser(_ref3, user) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var commit, response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              commit = _ref3.commit;\n              console.log('addUser', user);\n              _context2.next = 4;\n              return axios.post(\"\".concat(apiUrl, \"/users\"), user);\n\n            case 4:\n              response = _context2.sent;\n              commit('appendUser', response.data);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))();\n  },\n  updateUser: function updateUser(_ref4, user) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var dispatch, commit, response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              dispatch = _ref4.dispatch, commit = _ref4.commit;\n              _context3.next = 3;\n              return axios.put(\"\".concat(apiUrl, \"/users/\").concat(user.id), user);\n\n            case 3:\n              response = _context3.sent;\n              commit('updateUser', response.data);\n              dispatch('users/fetchUsers', {\n                isCurrentUser: false\n              }, {\n                root: true\n              });\n\n            case 6:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }))();\n  },\n  deleteUser: function deleteUser(_ref5, id) {\n    return _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      var dispatch, commit, response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              dispatch = _ref5.dispatch, commit = _ref5.commit;\n              _context4.next = 3;\n              return axios[\"delete\"](\"\".concat(apiUrl, \"/users/\").concat(id));\n\n            case 3:\n              response = _context4.sent;\n              commit('removeUser', response.data);\n              dispatch('users/fetchUsers', {\n                isCurrentUser: false\n              }, {\n                root: true\n              });\n\n            case 6:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }))();\n  },\n  setUser: function setUser(_ref6, user) {\n    var commit = _ref6.commit;\n    commit('setUser', user);\n  }\n};\nexport default {\n  namespaced: true,\n  state: state,\n  getters: getters,\n  mutations: mutations,\n  actions: actions\n};","map":{"version":3,"sources":["/Users/aaattt/projects/CalRailsVueApp/app/javascript/store/modules/users.js"],"names":["axios","serializeUser","apiUrl","state","users","getters","map","user","mutations","setUsers","appendUser","updateUser","c","id","removeUser","filter","setUser","actions","fetchUsers","commit","isCurrentUser","url","get","response","data","addUser","console","log","post","dispatch","put","root","deleteUser","namespaced"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport { serializeUser } from '../../functions/serializers';\n\nconst apiUrl = 'https://localhost:9292/';\n\nconst state = {\n  users: [],\n};\n\nconst getters = {\n  users: state => state.users.map(user => serializeUser(user)),\n  user: state => serializeUser(state.user)\n};\n\nconst mutations = {\n  setUsers: (state, users) => (state.users = users),\n  appendUser: (state, user) => (state.users = [...state.users, user]),\n  updateUser: (state, user) =>\n    (state.users = state.users.map(c => (c.id === user.id ? user : c))),\n  removeUser: (state, user) =>\n    (state.users = state.users.filter(c => c.id !== user.id)),\n  setUser: (state, user) => (state.user = user)\n};\n\nconst actions = {\n  async fetchUsers({ commit }, { isCurrentUser }) {\n    const url = isCurrentUser ? `${apiUrl}/users` : `${apiUrl}/users/excerpt`;\n    const response = await axios.get(url);\n    commit('setUsers', response.data);\n  },\n  async addUser({ commit }, user) {\n    console.log('addUser', user);\n    const response = await axios.post(`${apiUrl}/users`, user);\n    commit('appendUser', response.data);\n  },\n  async updateUser({ dispatch, commit }, user) {\n    const response = await axios.put(`${apiUrl}/users/${user.id}`, user);\n    commit('updateUser', response.data);\n    dispatch('users/fetchUsers', { isCurrentUser: false }, { root: true });\n  },\n  async deleteUser({ dispatch, commit }, id) {\n    const response = await axios.delete(`${apiUrl}/users/${id}`);\n    commit('removeUser', response.data);\n    dispatch('users/fetchUsers', { isCurrentUser: false }, { root: true });\n  },\n  setUser({ commit }, user) {\n    commit('setUser', user);\n  }\n};\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  mutations,\n  actions\n};\n"]},"metadata":{},"sourceType":"module"}